## Registering Systems

---
Registering RHEL systems with Red Hat is essential to access software updates, security patches, and support services through the subscription based model.

**Red Hat Developer Subscription**

- Red Hat offers a free subscription for a large number of its products via the Red Hat Developer program at https://developer.redhat.com.
- Using a Red Hat Developer Subscription, developers can rapidly develop, prototype, test, and demonstrate their applications on the same Red Hat software as used on production systems.

- Create a personal account at https://access.redhat.com, then sign up for the Red Hat Developer Subscription program.
- You may use an existing personal account, but not one associated with any organization's support subscription.
- The Red Hat Developer Subscription is self supported, but the product is updated regularly.


**Red Hat Insights**
  - Red Hat Insights is indeed a cloud based analytics service included with RHEL subscriptions
  - It proactively identifies security, performance, and configuration risks
  - It provides remediation guidance, often through Ansible playbooks
  - Once enabled, systems appear in the Red Hat console for monitoring
    
---

**Subscription Model: Simple Content Access (SCA)**
- **SCA** validates subscriptions at the organization level (no need to attach to individual systems)
- Managed via [Red Hat Hybrid Cloud Console](console.redhat.com)
- Provides access to:
  - Software repositories and updates
  - Red Hat Insights analytics
  - Knowledgebase and support
  - Security patches and bug fixes

**Registration Methods**

**1. Using `rhc` Command**
- For RHEL 8.8 and later systems
- Single command enables multiple services:
  ```bash
  sudo dnf install rhc
  ```
  ```bash
  sudo rhc connect
  ```
- Automatically enables:
  - Content repositories
  - Red Hat Insights analytics
  - Remote management capabilities
    
<img width="721" height="351" alt="Screenshot 2025-11-30 at 1 50 33 PM" src="https://github.com/user-attachments/assets/0a7f8ef2-8bb2-4701-b610-8130a7e74bfd" />


**2. Using Activation Keys**
- More secure
- no personal credentials required
- Create keys in Hybrid Cloud Console:
  - Set release version
  - Define system purpose tags
  - Pre-configure repositories
- Registration command:
  ```bash
  rhc connect --activation-key=<activation_key_name> --organization=<organization_ID>
  ```

**Unregistering a System with the rhc Tool**
  - To unregister your system, use the rhc disconnect command:
```bash
rhc disconnect
```

---

**Registering Systems with subscription-manager**

The subscription-manager tool is the legacy method for system registration, used when:

  - Systems run RHEL 8.7 or earlier (where rhc is unavailable)
  - Repository access is needed without connecting to Red Hat Insights
  - Working with environments that require the traditional approach

> Note: subscription-manager remains functional in RHEL 10, though some per-system subscription modules have been removed due to SCA.

**1. Basic Registration with Credentials**
```bash
subscription-manager register
```
  - Prompts for Red Hat username and password to register the system.

**2. Automated Registration with Activation Key**
```bash
subscription-manager register --activationkey <key_name> --org <org_ID>
```
  - More secure, avoids using personal credentials
  - Requires pre-created activation key from Hybrid Cloud Console

**Check Registration Status:**
```bash
subscription-manager status
```
> Note: Subscription usage is now tracked in Hybrid Cloud Console, not via command line.

**Enable Red Hat Insights**
  - Required since subscription-manager doesn't automatically connect to Insights.
```bash
sudo dnf -y install insights-client
subscription-manager register
sudo insights-client --register 
```

**System Purpose Configuration**
  - Optional tagging mechanism for inventory filtering:

| Attribute | Example Values |
|-----------|----------------|
| **Role** | RHEL Server, RHEL Workstation, Compute Node |
| **SLA** | Premium, Standard, Self Support |
| **Usage** | Production, Development/Test, Disaster Recovery |

**Configuration Commands:**
```bash
subscription-manager syspurpose role --set 'Red Hat Enterprise Linux Server'
subscription-manager syspurpose service-level --set 'Premium'
subscription-manager syspurpose usage --set 'Production'
```

**List Available Values:**
```bash
subscription-manager syspurpose usage --list
```

**Unregistering Systems**
```bash
subscription-manager unregister
```
  - Removes system registration completely.

---

**Alternative Registration Methods**

**RHEL Web Console (GUI)**
- Navigate to **Subscriptions** section
- Click **Register** and provide credentials or activation key
- Red Hat Insights registration is enabled by default


**During RHEL 10 Installation**
- In Anaconda installer, click **Connect to Red Hat**
- Use credentials or activation key
- Optional: Set system purpose and register to Insights
- For automated installations: Use `rhsm` Kickstart command with activation key


**Certificate Management**
Registered systems store identity certificates in `/etc/pki/`:

| Certificate Location | Purpose |
|---------------------|---------|
| `/etc/pki/product-default/` | Identifies installed Red Hat products |
| `/etc/pki/consumer/` | Identifies the system |
| `/etc/pki/entitlement/` | Authenticates to repositories |


**Inspect Certificates:**
```bash
rct cat-cert /etc/pki/product-default/486.pem
```
  - The `rct` tool provides detailed certificate information, including validity periods and product identifiers.

---

**Ubuntu Pro Subscription for Personal Use**

  - Ubuntu Pro is Canonical's premium security subscription that extends to personal use with a free tier for up to 5 machines.
  - Features for Personal Use
    - Up to 5 machines (physical or virtual)
    - 10 year security maintenance for high and critical CVEs
    - Coverage for 30,000+ packages beyond the main Ubuntu repositories
    - Kernel Livepatch: apply security patches without reboots
    - FIPS-certified modules and CIS(Center for Internet Security) hardening
    - Security compliance for common standards

**Check Current Status:**
```bash
pro status
```
<img width="661" height="341" alt="Screenshot 2025-12-01 at 7 06 55 AM" src="https://github.com/user-attachments/assets/33b6cd56-0afa-46d8-a782-8428330249f4" />

**Attach Subscription:**
  - Get token from https://ubuntu.com/pro/dashboard
  - Free token generated after creating an Ubuntu One account
```bash
sudo pro attach <TOKEN>
```
![Screenshot 2025-12-01 at 7 17 48 AM](https://github.com/user-attachments/assets/8fd9e39a-9901-458a-b5e1-c9c1e747c0fa)

**Check Status:**
```bash
pro status --all
```

**Refresh Subscription:**
```bash
sudo pro refresh
```

**Detach Subscription:**
```bash
sudo pro detach
```

---
